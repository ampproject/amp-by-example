!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",a),e.removeLineClass(e.state.activeLines[t],"background",o),e.removeLineClass(e.state.activeLines[t],"gutter",s)}function i(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}function n(e,n){for(var r=[],c=0;c<n.length;c++){var l=n[c];if(l.empty()){var f=e.getLineHandleVisualStart(l.head.line);r[r.length-1]!=f&&r.push(f)}}i(e.state.activeLines,r)||e.operation(function(){t(e);for(var i=0;i<r.length;i++)e.addLineClass(r[i],"wrap",a),e.addLineClass(r[i],"background",o),e.addLineClass(r[i],"gutter",s);e.state.activeLines=r})}function r(e,t){n(e,t.ranges)}var a="CodeMirror-activeline",o="CodeMirror-activeline-background",s="CodeMirror-activeline-gutter";e.defineOption("styleActiveLine",!1,function(i,a,o){var s=o&&o!=e.Init;a&&!s?(i.state.activeLines=[],n(i,i.listSelections()),i.on("beforeSelectionChange",r)):!a&&s&&(i.off("beforeSelectionChange",r),t(i),delete i.state.activeLines)})});