<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="215342317408-fnuvelotjpqsnj0dkonnrfqef5shdf2m.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js?onload=onLoadCallback" async defer></script>
    <title>Logout</title>
  </head>
  <body>
    <form method="post" action="logout" id="logout-form">
      <input name="returnurl" type="hidden" value="{{.ReturnURL}}">
      <input type="submit" value="Logout" class="button">
    </form>
      <script>

      window.onLoadCallback = function(){
          gapi.load('auth2', function () {
            gapi.auth2.init({
              client_id: '215342317408-fnuvelotjpqsnj0dkonnrfqef5shdf2m.apps.googleusercontent.com'
            });
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
              console.log('User signed out.');
            });
            var form = document.getElementById("logout-form");
            form.submit();
          });
          // var auth2 = gapi.auth2.getAuthInstance();
          // auth2.signOut().then(function () {
          //   console.log('User signed out.');
          // });
          //   var form = document.getElementById("logout-form");
          //   form.submit();
        }
    </script>
  </body>
</html>
