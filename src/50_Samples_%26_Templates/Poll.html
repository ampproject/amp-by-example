<!---{
  "preview": "default",
  "experiments": ["amp-form-var-sub"]
  }--->
  <!--
  #### Introduction

  This is a sample template for a poll in AMP. After selecting one of the answers, you will see the percentage of chosen answers.

-->
<!-- -->
<!doctype html>
<html âš¡>
<head>
<meta charset="utf-8">
<script async src="https://cdn.ampproject.org/v0.js"></script>
<!-- #### Setup -->
<!--
Import the additional AMP components. This sample uses a amp-form and mustache templates.
-->
<script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
<script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
<link rel="canonical" href="https://ampbyexample.com/samples_templates/poll/">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

<style amp-custom>
  .percentage-container {
    z-index: 0;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  #poll1 li {
            position: relative;
            padding: 1em;
            list-style: none;
            margin: 0;
            display: block;
            height: 20px;
        }
        #poll1.amp-form-submit-success fieldset {
            display: none;
        }
        .percentage-container {
            z-index: 0;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        .one-pc {
            width: 1%;
            height: 100%;
            display: inline-block;
        }
        .Wekas .one-pc {
            background: #dc4e41;
        }
        .Penguins .one-pc {
            background: #3f51b5;
        }
        .Ostriches .one-pc {
            background: #4CAF50;
        }
        .Kiwis .one-pc {
            background: #00ffff;
        }
        .poll1-results .title {
            z-index: 1;
            color: black;
            position: absolute;
        }

</style>
</head>
<body>

<h4 id="header1">Flightless bird poll</h4>
<!-- #### Poll -->
<!--
We use `amp-form` to realize a poll. Use `clientId` variable to identify the user that has voted, more info [here](https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md#client-id).
-->
<form method="post" action-xhr="<%host%>/samples_templates/poll/submit-xhr" target="_blank"
      id="poll1"
      custom-validation-reporting="as-you-go">
    <input name="clientId" type="hidden" default-value="CLIENT_ID(poll)">
    <fieldset>
        <p>What is your favorite flightless bird?</p>
        <ul>
            <li>
                <label>
                    <input name="answer" value="Penguins" type="radio" on="change:poll1.submit">
                    Penguins
                </label>
            </li>
            <li>
                <label>
                    <input name="answer" value="Ostriches" type="radio" on="change:poll1.submit">
                    Ostriches
                </label>
            </li>
            <li>
                <label>
                    <input name="answer" value="Kiwis" type="radio" on="change:poll1.submit">
                    Kiwis
                </label>
            </li>
            <li>
                <label>
                    <input name="answer" value="Wekas" type="radio" on="change:poll1.submit">
                    Wekas
                </label>
            </li>
        </ul>
    </fieldset>
    <div submit-success>
        <template type="amp-mustache">
            Thanks for answering the poll! Here are the results!
            <ul class="poll1-results">
            {{#result}}
                <li>
                    <div class="percentage-container {{Answer}}">
                        {{#Percentage}}<span class="one-pc"></span>{{/Percentage}}
                    </div>
                    <span class="title">{{Answer}}</span>
                </li>
            {{/result}}
            </ul>
        </template>
    </div>
</form>
</body>
</html>
