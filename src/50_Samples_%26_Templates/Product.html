<!---{
  "preview": "default",
  "skipValidation": "true",
  "default": "preview",
  "experiments": ["amp-form-var-sub"]
  }--->
<!--
#### Introduction

This sample showcases how to build a product page in AMP HTML.
-->
<!doctype html>
<html âš¡>
<head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <!--
    Additionally used AMP components must be imported in the header.
    -->
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script>
    <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
    <script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>
    <script async custom-element="amp-lightbox" src="https://cdn.ampproject.org/v0/amp-lightbox-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
    <script async custom-element="amp-selector" src="https://cdn.ampproject.org/v0/amp-selector-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>

    <link rel="canonical" href="<%host%>/samples_templates/product/">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
    <%>css/product.css%>
    #product-description {
      clear: both;
    }
    amp-lightbox {
      background: rgba(0,0,0,0.8);
      width: 100%;
      height: 100%;
      position: absolute;
    }
    amp-accordion p, amp-accordion h4 {
      padding: 16px;
    }
    amp-accordion h4 {
      font-size: 18px;
    }
    .play {
      padding-left: 28px;
      background-position: left center;
      background-repeat: no-repeat;
      background-image: -webkit-image-set(url(/img/ic_play_circle_filled_black_1x_web_24dp.png) 1x,url(/img/ic_play_circle_filled_black_2x_web_24dp.png) 2x);
    }
    .amp-youtube-container {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }
    #video-container, #social, form .button {
      margin: 16px;
    }
    .video {
      flex: 1;
    }
    .price-description {
      color: grey;
      font-weight: 400;
    }
    .quantity {
      margin: 16px 0;
    }
    .product-gallery > ul {
      margin: 0;
      padding: 0;
      float: left;
      list-style: none;
      line-height: 0;
    }
    .product-gallery > ul > li {
      cursor: pointer;
      margin: 0 8px 8px 8px;
      opacity: 1;
      will-change: opacity;
      transition: all 0.3s cubic-bezier(.25,.8,.25,1);
    }
    .product-gallery > ul > li:active {
      opacity: 0.5;
    }
    .product-gallery > ul > li:focus {
      outline: none;
    }
    form#order {
      display: flex;
    }
    form#order label {
      display: inline;
      font-weight: 500;
      font-size: 16px;
      margin: 0;
    }
    form#order div {
      display: flex;
      align-items: center;
    }
    form#order .button {
      width: 100%;
      max-width: 400px;
      align-self: center;
      margin: 16px 20%;
      box-sizing: border-box;
    }
    form#order.amp-form-submitting [name=add-to-cart] {
      color: #666;
      background-color: #aaa;
      cursor: default;
    }
    form#order amp-selector > ul {
      list-style: none;
      display: flex;
      align-items: flex-end;
      justify-content: end;
    }
    form#order amp-selector > ul > li {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
      background: white;
      height: 40px;
      min-width: 40px;
      width: auto;
    }
    form#order amp-selector [option] {
      outline: none;
    }
    form#order amp-selector amp-img[option][selected] {
      outline-width: 1px;
      outline-style: solid;
      outline-color: #eb407a;
      background: none;
    }
    form#order amp-selector:not([disabled]) [option][selected]:not([disabled]) {
      will-change: box-shadow;
      box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
      transition: box-shadow 0.3s cubic-bezier(.25,.8,.25,1);
      color: #fff;
      background-color: #eb407a;
    }
    form#order amp-selector:not([disabled]) [option]:not([selected]):not([disabled]) {
      will-change: box-shadow;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      transition: box-shadow 0.3s cubic-bezier(.25,.8,.25,1);
    }
    form#order amp-selector:not([disabled]) [option]:not([selected]):not([disabled]) amp-img {
      opacity: 0.5;
    }
    </style>

    <!-- #### Metadata -->
    <!-- The page indexing requires schema.org markup for one of the following types: Type, AggregateRating, Offers. [Learn more](https://developers.google.com/structured-data/carousels/top-stories#markup_specification). -->
    <script type="application/ld+json">
    {
        "@context": "http://schema.org/",
        "@type": "Product",
        "name": "Apple",
        "image": "http://www.ampbyexample.com/img/product1_1024x682.jpg",
        "description": "Lorem ipsum",
        "mpn": "925872",
        "brand": {
            "@type": "Fruit",
            "name": "Apple"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.4",
            "reviewCount": "88"
        },
        "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "price": "1.99",
            "priceValidUntil": "2020-11-05",
            "itemCondition": "http://schema.org/UsedCondition",
            "availability": "http://schema.org/InStock",
            "seller": {
                "@type": "Retail",
                "name": "AMP by Example"
            }
        }
    }
    </script>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    </head>
    <body>
    <%>product/header.html%>

    <h2>Apple</h2>

    <!-- #### Social -->
    <!-- The Social Share extension provides a common interface for share buttons. Learn more about `amp-social-share` [here](/components/amp-social-share/). </a> -->
    <div id="social">
      <amp-social-share type="twitter"
                        width="30"
                        height="22"></amp-social-share>
      <amp-social-share type="facebook"
                        width="30"
                        height="22"
                        data-attribution=254325784911610></amp-social-share>
      <amp-social-share type="gplus"
                        width="30"
                        height="22"></amp-social-share>
      <amp-social-share type="email"
                        width="30"
                        height="22"></amp-social-share>
      <amp-social-share type="pinterest"
                        width="33"
                        height="22"></amp-social-share>
    </div>

    <p id="product-description">Lorem ipsum dolor sit amet, ut sed non vel mattis. Et nulla suscipit ante ligula nisl in. Ut venenatis et mauris, mauris porta vulputate tellus mauris integer facilisis.</p>
    <!-- #### Video -->
    <!--
      AMP supports a wide range of video platforms. Here we are using `amp-youtube` to show a product video. You can find an overview of all supported video platforms [here](/advanced/integrating_videos_in_amp_an_overview/).

      In this sample we don't embed the video directly into the page, but instead show it in a lightbox using the `amp-lightbox` component. Learn more about `amp-lightbox` [here](/components/amp-lightbox/).
    -->
    <div id="video-container">
      <a on="tap:watch-video-lightbox" role="button" class="button button-secondary play" tabindex="0">
        Show Video
      </a>

      <amp-lightbox id="watch-video-lightbox" layout="nodisplay">
        <div class="amp-youtube-container">
          <div class="video">
            <a on="tap:watch-video-lightbox.close" role="button" tabindex="0">
              Close
            </a>
            <amp-youtube width="480"
                         height="270"
                         layout=responsive
                         data-videoid="lBTCB7yLs8Y" >
            </amp-youtube>
          </div>
        </div>
      </amp-lightbox>
    </div>

     <!-- #### Image Gallery -->
    <!-- The `amp-carousel` component works very well for product image galleries. We use the [amp-selector component](/components/amp-selector/) to implement a film strip like slide preview. Clicking on a preview image will reveal the image in the carousel via the tap action `on="tap:product-carousel-preview.goToSlide(index=0)"`. Note: the preview is only visible on desktops.  -->
  <!-- The actual carousel. Learn how the `amp-carousel` component works [here](/advanced/image_galleries_with_amp-carousel/). -->
  <div class="product-gallery"> 
     <ul class="hide-on-mobile">
       <li on="tap:product-carousel.goToSlide(index=0)" tabindex="0" role="button" option="green" selected> 
         <amp-img src="/img/product1_60x40.jpg" width="60" height="40"></amp-img>
       </li>
       <li on="tap:product-carousel.goToSlide(index=1)" tabindex="1" role="button" option="golden"> 
         <amp-img src="/img/product1_alt1_60x40.jpg" width="60" height="40"></amp-img>
       </li>
       <li on="tap:product-carousel.goToSlide(index=2)" tabindex="2" role="button" option="red"> 
         <amp-img src="/img/product1_alt2_60x40.jpg" width="60" height="40"></amp-img>
       </li>
     </ul>
    <amp-carousel id="product-carousel" width="1024" height="682" layout="responsive" type="slides">
        <amp-img src="/img/product1_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
        <amp-img src="/img/product1_alt1_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
        <amp-img src="/img/product1_alt2_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
    </amp-carousel>
  </div>

    <h5 class="price-description">Price: $1.99</h5>
    <!-- #### Product Configuration -->
    <!-- The add to cart action is implemented using  [amp-form](/components/amp-form/). In our sample we use the [amp-selector](/components/amp-selector/) for selecting different product properties. Pressing the `ADD TO CART` button adds the product to a shopping cart page using the properties you have selected. Notice that the button URL contains the query `clientId={{ClientId}}`. If an item is successfully added to the shopping cart, we redirect the user to the shopping cart page. The redirect target is configured via a header in the server's form response ([redirecting after submission](https://github.com/ampproject/amphtml/blob/master/extensions/amp-form/amp-form.md#redirecting-after-a-submission)):

      access-control-expose-headers:AMP-Access-Control-Allow-Source-Origin,AMP-Redirect-To
      amp-redirect-to:http://ampbyexample.com/shopping_cart/?clientid=amp-123456789

    We are using the `CLIENT_ID` variable to identify the user, this enables storing a shopping cart between repeated visits of an AMP page (either via the AMP Cache or the original host). This variable can be used inside an amp-form by declaring an hidden input value with `default-value="CLIENT_ID(cart)`. Read more about variable substitution [here](https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md). -->

      <form id="order" method="POST"
            action-xhr="<%host%>/samples_templates/product/add_to_cart"
            target="_top">
        <div>
          <label for="color">Color:</label>
          <amp-selector name="color" layout="container">
            <ul>
              <li> 
                <amp-img option="green" selected src="/img/product1_60x40.jpg" width="60" height="40"></amp-img>
              </li>
              <li> 
                <amp-img option="golden" src="/img/product1_alt1_60x40.jpg" width="60" height="40"></amp-img>
              </li>
              <li> 
                <amp-img option="red" src="/img/product1_alt2_60x40.jpg" width="60" height="40"></amp-img>
              </li>
            </ul>
          </amp-selector>
        </div>
        <div>
          <label for="quantity">Quantity:</label>
          <amp-selector name="quantity" layout="container">
            <ul>
              <li option="1" selected>1</li>
              <li option="2">2</li>
              <li option="3">3</li>
              </li>
            </ul>
          </amp-selector>
        </div>
        <div>
          <label for="size">Size:</label>
          <amp-selector name="size" layout="container">
            <ul>
              <li option="S">S</li>
              <li option="M" selected>M</li>
              <li option="L">L</li>
            </ul>
          </amp-selector>
        </label>
        </div>
        <input type="submit" class="button button-primary" name="add-to-cart" value="add to cart">
        <input type="hidden" name="name" value="Apple">
        <input type="hidden" name="price" value="$1.99">
        <input name="clientId" type="hidden" value="CLIENT_ID(cart)" data-amp-replace="CLIENT_ID">
        <div submit-error>
          <template type="amp-mustache">
            Error! Looks like something went wrong with your shopping cart, please try to add an item again. {{error}}
          </template>
        </div>
      </form>

    <!-- #### Collapsibles/Accordion -->
    <!-- Use `amp-accordion` to hide and show additional data about your product. Learn more about `amp-accordion` [here](/components/amp-accordion/). -->
    <div>
      <amp-accordion>
        <section>
          <h4>Description</h4>
          <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
        </section>
        <section>
          <h4>Specification</h4>
          <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
        </section>
        <section>
          <h4>Measurements</h4>
          <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
        </section>
        <section>
          <h4>Other</h4>
          <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
        </section>
      </amp-accordion>
    </div>

    <!-- #### Dynamic Related Product Lists -->
    <!--  -->
    <h5 id="related-products">Related products</h5>
    <%>product/related.html%>

    <!--
      #### Analytics
    -->
    <!--
      Analytics must be configured in the body. Here we use Google Analytics to track pageviews.
    -->
    <amp-analytics type="googleanalytics">
      <script type="application/json">
          {
            "vars": {
                "account": "UA-73836974-1"
            },
            "triggers": {
                "default pageview": {
                    "on": "visible",
                    "request": "pageview",
                    "vars": {
                        "title": "Product"
                    }
                }
            }
        }
      </script>
    </amp-analytics>
    </body>
</html>
