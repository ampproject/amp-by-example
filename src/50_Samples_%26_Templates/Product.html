<!---{
  "preview": "default",
  "skipValidation": "true",
  "default": "preview",
  "experiments": ["amp-form-var-sub"]
  }--->
<!--
#### Introduction

This sample showcases how to build a product page in AMP HTML.
-->
<!doctype html>
<html âš¡>
<head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <!--
    Additionally used AMP components must be imported in the header.
    -->
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script>
    <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
    <script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>
    <script async custom-element="amp-lightbox" src="https://cdn.ampproject.org/v0/amp-lightbox-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>

    <link rel="canonical" href="<%host%>/samples_templates/product/">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
    <%>css/product.css%>
    .call-to-action {
        display: flex;
        float: right;
        margin: 0 16px;
    }
    #product-description {
        clear: both;
    }
    amp-lightbox {
        background: rgba(0,0,0,0.8);
        width: 100%;
        height: 100%;
        position: absolute;
    }
    amp-accordion p, amp-accordion h4 {
        padding: 16px;
    }
    amp-accordion h4 {
        font-size: 18px;
    }
    .play {
        padding-left: 28px;
        background-position: left center;
        background-repeat: no-repeat;
        background-image: -webkit-image-set(url(/img/ic_play_circle_filled_black_1x_web_24dp.png) 1x,url(/img/ic_play_circle_filled_black_2x_web_24dp.png) 2x);
    }
    .amp-youtube-container {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
    }
    #video-container, #social, #add-to-cart {
        margin: 16px;
    }
    .video {
        flex: 1;
    }
    .price-description {
        color: grey;
        font-weight: 400;
    }
    #product-header {
        margin-bottom: 24px;
        margin-top: 24px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
    }
    form {
        flex-wrap: nowrap;
    }
    form.amp-form-submit-success > #add-to-cart {
        display: none;
    }
    .go-to-cart {
        margin: 16px;
    }
    #add-to-cart, .go-to-cart {
        width: 110px;
        padding: 0px;
    }
    </style>

    <!-- #### Metadata -->
    <!-- The page indexing requires schema.org markup for one of the following types: Type, AggregateRating, Offers. [Learn more](https://developers.google.com/structured-data/carousels/top-stories#markup_specification). -->
    <script type="application/ld+json">
    {
        "@context": "http://schema.org/",
        "@type": "Product",
        "name": "Apple",
        "image": "http://www.ampbyexample.com/img/product1_1024x682.jpg",
        "description": "Lorem ipsum",
        "mpn": "925872",
        "brand": {
            "@type": "Fruit",
            "name": "Apple"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.4",
            "reviewCount": "88"
        },
        "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "price": "1.99",
            "priceValidUntil": "2020-11-05",
            "itemCondition": "http://schema.org/UsedCondition",
            "availability": "http://schema.org/InStock",
            "seller": {
                "@type": "Retail",
                "name": "AMP by Example"
            }
        }
    }
    </script>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    </head>
    <body>
    <%>product/header.html%>

        <!-- #### Product Quantity -->
        <!-- This dropdown is realized using [amp-form](/components/amp-form/) and allows to select how many items to be added to the shopping cart. Pressing the `ADD TO CART` button leads to a shopping cart page. We are using the `CLIENT_ID` variable to identify the user. Read more about variable substitution [here](https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md)-->
        <div id="product-header">
            <h2>Apple</h2>
            <div class="call-to-action">
                <form method="POST"
                  action-xhr="<%host%>/samples_templates/product/add_to_cart"
                  target="_top">
                  <select name="quantity" class="data-input">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                  </select>
                   <input type="submit" class="button button-primary" id="add-to-cart" value="ADD TO CART">
                   <input type="hidden" name="name" value="Apple">
                   <input type="hidden" name="price" value="$1.99">
                   <input type="hidden" name="img" value="/img/product1_1024x682.jpg">
                   <input name="clientId" type="hidden" default-value="CLIENT_ID(cart)">
                   <div class="submit-success" submit-success>
                        <template type="amp-mustache">
                            <a class="button button-primary go-to-cart" href="<%host%>/shopping_cart/?clientId={{ClientId}}&cache=0">go to cart</a>
                        </template>
                    </div>
                    <div submit-error>
                        <template type="amp-mustache">
                            Error! Looks like something went wrong with your shopping cart, please try to add an item again. {{error}}
                        </template>
                    </div>
                </form>
            </div>
        </div>
        <p id="product-description">Lorem ipsum dolor sit amet, ut sed non vel mattis. Et nulla suscipit ante ligula nisl in. Ut venenatis et mauris, mauris porta vulputate tellus mauris integer facilisis.</p>
        <h5 class="price-description">From $1.99</h5>

        <!-- #### Image Gallery -->
        <!-- The `amp-carousel` works very well for product image galleries. Learn more about `amp-carousel` [here](/advanced/image_galleries_with_amp-carousel/). -->
        <amp-carousel width="512" height="384" layout="responsive" type="slides">
            <amp-img src="/img/product1_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
            <amp-img src="/img/product1_alt1_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
            <amp-img src="/img/product1_alt2_1024x682.jpg" width="1024" height="682" layout="responsive"></amp-img>
        </amp-carousel>

        <!-- #### Video -->
        <!--
AMP supports a wide range of video platforms. Here we are using `amp-youtube` to show a product video. You can find an overview of all supported video platforms [here](/advanced/integrating_videos_in_amp_an_overview/).

In this sample we don't embed the video directly into the page, but instead show it in a lightbox using the `amp-lightbox` component. Learn more about `amp-lightbox` [here](/components/amp-lightbox/).
        -->
        <div id="video-container">
            <a on="tap:watch-video-lightbox" role="button" class="button button-secondary play" tabindex="0">
            Show Video
            </a>

            <amp-lightbox id="watch-video-lightbox" layout="nodisplay">
                <div class="amp-youtube-container">
                    <div class="video">
                        <a on="tap:watch-video-lightbox.close" role="button" tabindex="0">
                            Close
                        </a>
                        <amp-youtube width="480"
                            height="270"
                            layout=responsive
                            data-videoid="lBTCB7yLs8Y" >
                        </amp-youtube>
                    </div>
                </div>
            </amp-lightbox>
        </div>

    <!-- #### Social -->
    <!-- The Social Share extension provides a common interface for share buttons. Learn more about `amp-social-share` [here](/components/amp-social-share/). </a> -->
    <div id="social">
        <amp-social-share type="twitter"
        width="30"
        height="22"></amp-social-share>
        <amp-social-share type="facebook"
        width="30"
        height="22"
        data-attribution=254325784911610></amp-social-share>
        <amp-social-share type="gplus"
        width="30"
        height="22"></amp-social-share>
        <amp-social-share type="email"
        width="30"
        height="22"></amp-social-share>
        <amp-social-share type="pinterest"
        width="33"
        height="22"></amp-social-share>
    </div>

    <!-- #### Collapsibles/Accordion -->
    <!-- Use `amp-accordion` to hide and show additional data about your product. Learn more about `amp-accordion` [here](/components/amp-accordion/). -->
    <div>
        <amp-accordion>
            <section>
                <h4>Description</h4>
                <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
            </section>
            <section>
                <h4>Specification</h4>
                <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
            </section>
            <section>
                <h4>Measurements</h4>
                <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
            </section>
            <section>
                <h4>Other</h4>
                <p>Lorem ipsum dolor sit amet, mauris id, fermentum natoque ut et ullam dolore egestas. Vitae tortor maecenas nec consequat, nisl vestibulum est est curabitur. Mi eu in pellentesque lectus nostra ut. </p>
            </section>
        </amp-accordion>
    </div>

    <!-- #### Dynamic Related Product Lists -->
    <!--  -->
    <h5 id="related-products">Related products</h5>
    <%>product/related.html%>

    <!--
    #### Analytics
    -->
    <!--
    Analytics must be configured in the body. Here we use Google Analytics to track pageviews.
    -->
    <amp-analytics type="googleanalytics">
        <script type="application/json">
        {
            "vars": {
                "account": "UA-73836974-1"
            },
            "triggers": {
                "default pageview": {
                    "on": "visible",
                    "request": "pageview",
                    "vars": {
                        "title": "Product"
                    }
                }
            }
        }
        </script>
    </amp-analytics>
</body>
</html>
