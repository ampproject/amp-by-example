<!---{
  "preview": "default",
  "default": "preview",
  "skipValidation": true
}--->
<!--
## Introduction

This sample showcases how to build a product browse page in AMP HTML.
-->
<!-- -->
<!doctype html>
<html ⚡>
<head>
  <meta charset="utf-8">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <!--
  Additionally used AMP components must be imported in the header.
  -->
  <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
  <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
  <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
  <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
  <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
  <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>

  <link rel="canonical" href="<%host%>/samples_templates/product_browse_page/">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <style amp-custom>
    article#preview {
      background: #ECEFF1;
    }
    <%>css/product.css%>
    #hero-images {
        object-fit: contain;
    }
    #hero-images .caption {
      text-align: center;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 24px;
      background: rgba(200, 200, 200, 0.8);
      color: #333;
      font-size: 36px;
      max-height: 30%;
      font-weight: 300;
    }
    .choose-container {
      position: relative;
      z-index: 1;
    }
    .choices {
      list-style-type: none;
      border-radius: 2px;
    }
    .choices-container {
      background-color: white;
      position: absolute;
    }
    .first-sort-choice {
      display: inline-block;
    }
    .hide {
      opacity: 0;
    }
    .show {
      opacity: 1;
    }
    .c {
      position: relative;
      display: inline-block;
    }
  </style>

  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
</head>
<body>
  <!-- ## Navigation -->
  <!--
    Use the [amp-sidebar](/components/amp-sidebar/) component to give customers the chance to quickly jump to any of your product categories.
  -->
  <amp-sidebar id="drawermenu" layout="nodisplay">
    <a href="/" class="caps text-decoration-none block p1">Products</a>
    <hr/>
    <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">Fruit</a>
    <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">Vegetable</a>
    <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">More</a>
  </amp-sidebar>
  <!-- ## Header with Search -->
  <!--
    AMP supports forms, which means you can directly integrate a product search into your AMPs. Try searching for "Apple".

    AMP doesn't support custom Javascript, but you can use CSS3 animations to enrich your page. The expanding text field when the search box is focused is implemented with CSS only.
  -->
  <div class="header">
    <a id="sample-menu" on="tap:drawermenu.toggle">
      <amp-img srcset="/img/ic_menu_white_1x_web_24dp.png 1x, /img/ic_menu_white_2x_web_24dp.png 2x" width="24" height="24" alt="navigation"></amp-img>
    </a>
    <form method="GET" action="/samples_templates/product_browse_page[[.Mode]]/search" target="_top">
      <input name="search" type="search" placeholder="Search">
      <a id="sample-logo" href="/">Products</a>
      <input type="submit" value="">
    </form>
  </div>

  <!-- ## A Hero Slider -->
  <!-- The `amp-carousel` component can be used to quickly create full-bleed, auto-advancing slideshows showcasing your latest promotions.   -->
  <amp-carousel id="hero-images" width="1024" height="480" layout="responsive" type="slides" autoplay>
    <a href="#">
      <amp-img src="/img/product_hero1_1024x683.jpg" layout="fill" alt="product hero 1" attribution="visualhunt"></amp-img>
      <div class="caption">The 10 best Apples</div>
    </a>
    <a href="#">
      <amp-img src="/img/product_hero2_1024x683.jpg" layout="fill" alt="product hero 2" attribution="visualhunt"></amp-img>
      <div class="caption">So much orange!</div>
    </a>
    <a href="#">
      <amp-img src="/img/product_hero3_1024x683.jpg" layout="fill" alt="product hero 3" attribution="visualhunt"></amp-img>
      <div class="caption">So healthy.</div>
    </a>
  </amp-carousel>

  <h3 class="pl1 pt2 pb2">[[.Title]]</h3>

  <div class="items">
    [[range .Products]]
    <a class="m1 text-decoration-none" href="/samples_templates/product/[[$.Mode]]">
      <amp-img width="640"
               height="426"
               layout="responsive"
               alt="[[.Name]]"
               src="[[.Img]]"></amp-img>
           <p class="name">[[.Name]]</p>
           <p class="star">[[.StarsAsHtml]]</p>
           <p class="price">$[[.Price]]</p>
  </a>
  [[else]]
  <p>No products found.</p>
  [[end]]
</div>
<amp-state id="products">
  <script type="application/json">
  {
    "sortMenuOpen": "false",
    "sortChoice": "Price high to low",
    "sortChoiceValue": "price-descendent",
    "secondSortChoice": "Price low to high",
    "secondSortChoiceValue": "price-ascendent",
    "sortChoiceTemp": "Price high to low",
    "sortChoiceTempValue": "price-descendent"
  }
  </script>
</amp-state>
<div class="choose-container">
    <span class="pl1 pr1"> Sort </span>
    <div class="c">
      <p role="button" [text]="products.sortChoice" class="pt1 first-sort-choice" on="tap:AMP.setState({
          products: {
            sortMenuOpen: true
        }
      })">Price high to low</p>
      <div class="choices-container">
          <ul class="choices pl0">
          <li role="button" [text]="products.secondSortChoice" on="tap:AMP.setState({
            products: {
              sortMenuOpen: false,
              sortChoiceTemp: products.sortChoice,
              sortChoiceTempValue: products.sortChoiceValue,
              sortChoice: products.secondSortChoice,
              sortChoiceValue: products.secondSortChoiceValue,
              secondSortChoice: products.sortChoiceTemp,
              secondSortChoiceValue: products.sortChoiceTempValue
            }
          })" class="hide" [class]="products.sortMenuOpen == true ? 'show' : ' hide'">Price low to high</li>
        </ul>
      </div>
  </div>
</div>

<!--<button class="ampstart-btn caps m2" on="tap:AMP.setState({products: {sort: price-descendent}})">
  Order
</button>-->
<amp-list class="items"
          width="200"
          height="100"
          layout="responsive"
          src="/samples_templates/products?sort=price-descendent&_=RANDOM"
          [src]="products.sortChoiceValue == 'price-descendent' ? '/samples_templates/products?sort=price-descendent&_=RANDOM' : '/samples_templates/products?sort=price-ascendent&_=RANDOM'">
  <template type="amp-mustache">
      <amp-img width="640"
               height="426"
               layout="responsive"
               alt="{{name}}"
               src="{{img}}"></amp-img>
             <p class="name">{{name}}</p>
             <p class="star">{{{stars}}}</p>
             <p class="price">${{price}}</p>
    </a>
  </template>
</amp-list>
<p> Choice value<span [text]="products.sortChoiceValue">price-descendent</span></p>
<p>Temp choice value<span [text]="products.sortChoiceTempValue">price-descendent</span></p>
<p>Second choice value<span [text]="products.secondSortChoiceValue">price-ascendent</span></p>

<!-- ## Offers & Highlights -->
<!-- -->
<h3 class="pl1 pt2 pb2">Recommendations</h3>
  <!-- The `amp-carousel` supports also a more traditional carousel mode.   -->
  <amp-carousel class="m1" width="auto" height="160" layout="fixed-height" type="carousel">
    <a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Apple" src="/img/product1_640x426.jpg"></amp-img>
      <p class="name">Apple</p>
      <p class="star">★★★★★</p>
      <p class="price">$1.99</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Orange" src="/img/product2_640x426.jpg"></amp-img>
      <p class="name">Orange</p>
      <p class="star">★★★★☆</p>
      <p class="price">$0.99</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Pear" src="/img/product3_640x426.jpg"></amp-img>
      <p class="name">Pear</p>
      <p class="star">★★★☆☆</p>
      <p class="price">$1.50</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Banana" src="/img/product4_640x426.jpg"></amp-img>
      <p class="name">Banana</p>
      <p class="star">★★★★★</p>
      <p class="price">$1.50</p>
    </a>
    <a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Apple" src="/img/product1_640x426.jpg"></amp-img>
      <p class="name">Apple 2</p>
      <p class="star">★★★★★</p>
      <p class="price">$1.99</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Orange" src="/img/product2_640x426.jpg"></amp-img>
      <p class="name">Orange 2</p>
      <p class="star">★★★★☆</p>
      <p class="price">$0.99</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Pear" src="/img/product3_640x426.jpg"></amp-img>
      <p class="name">Pear 2</p>
      <p class="star">★★★☆☆</p>
      <p class="price">$1.50</p>
    </a><a class="m1 text-decoration-none" href="#" role="listitem">
      <amp-img width="640" height="426" layout="responsive" alt="Banana" src="/img/product4_640x426.jpg"></amp-img>
      <p class="name">Banana 2</p>
      <p class="star">★★★★★</p>
      <p class="price">$1.50</p>
    </a>
</amp-carousel>

<!-- -->
<h3 class="pl1 pt2 pb2">Bestsellers</h3>
<!--
With AMP, you can easily pull in different latest offers or highlights without changing the page. To do so, just use `amp-list` to fire a CORS request to a JSON endpoint which supplies the list of related products. These are populated into an amp-mustache template on the client.
 Learn more about `amp-list` [here](/components/amp-list/)
-->
<amp-list class="items"
          width="200"
          height="100"
          layout="responsive"
          src="/json/related_products.json">
  <template type="amp-mustache">
    <a class="m1 text-decoration-none" href="/samples_templates/product/preview/">
      <amp-img width="640"
               height="426"
               layout="responsive"
               alt="{{name}}"
               src="{{img}}"></amp-img>
             <p class="name">{{name}}</p>
             <p class="star">{{{stars}}}</p>
             <p class="price">${{price}}</p>
    </a>
  </template>
</amp-list>

<!--
  ## User Analytics
-->
<!--
  Analytics must be configured in the body. Here we use Google Analytics to track pageviews.
-->
<amp-analytics type="googleanalytics">
  <script type="application/json">
{
        "vars": {
            "account": "UA-80609902-1"
        },
        "triggers": {
            "default pageview": {
                "on": "visible",
                "request": "pageview",
                "vars": {
                    "title": "{{title}}"
                }
            }
        }
    }
  </script>
</amp-analytics>
</body>
</html>
