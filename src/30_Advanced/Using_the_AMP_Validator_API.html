<!---{
  "hideCode": true,
  "hidePreview": true,
  "skipValidation": true
}--->
<!doctype html>
<html ⚡>
<head>
  <meta charset="utf-8">
  <link rel="canonical" href="<%host%>/advanced/using_the_amp_validator_api/">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
</head>
<body>
<!--

## Introduction

The AMP Validator API is an endpoint developers can call to check that their AMP pages are formatted correctly, even before they are deployed. The API can validate live AMP pages as well as local html files.

## See How It Works

To check if a webpage’s AMP markup is correct, just send the AMP page to the endpoint <code>https://amp.cloudflare.com/q/</code> like this:

```
curl https://amp.cloudflare.com/q/amp.usatoday.com/story/82055560/
{
  "source": "http://amp.usatoday.com/story/82055560/",
  "valid": true,
  "version": "1488238516283"
}
```

The API has options to send just the markup content, or point the linter to the live site. To send a file, add the <code>--data-binary</code> flag:

```
curl -X POST --data-binary @amp_page.html -H 'Content-Type: text/html; charset=UTF-8' https://amp.cloudflare.com/q/
```

The API has options to send just the markup content, or point the linter to the live site. To send a file, add the <code>--data-binary</code> flag:

```
curl -X POST --data-binary @amp_page.html -H 'Content-Type: text/html; charset=UTF-8' https://amp.cloudflare.com/q/
```

If you send an AMP page with invalid AMP syntax, the message returned will tell you exactly what breaks your AMP page, and will point you to the specific place in the AMP reference where you can see the implementation guide for the broken element.

```
curl -X POST --data-binary @invalid_amp.html -H 'Content-Type: text/html; charset=UTF-8' https://amp.cloudflare.com/q/
{
  "errors": [
    {
      "code": "MANDATORY_TAG_MISSING",
      "col": 7,
      "error": "The mandatory tag 'link rel=canonical' is missing or incorrect.",
      "help": "https://www.ampproject.org/docs/reference/spec.html#required-markup",
      "line": 13
    }
  ],
  "source": "POST",
  "valid": false,
  "version": "1485227592804"
}
```

Here’s a reference in python, and if you want to send html directly instead of a live webpage, replace line two with <code>r = requests.post("https://amp.cloudflare.com/q', data=html)</code>

```
import requests

u = 'www.bbc.co.uk/news/amp/39192025'
r = requests.get('https://amp.cloudflare.com/q/' + u)
validation = r.json()
if validation['valid']:
  print u, 'is valid'
else:
  print u, 'failed!'
  for e in validation['errors']:
    print e
```
-->
</body>
</html>
