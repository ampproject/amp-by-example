<!---{
  "disablePlayground": true
}--->
<!doctype html>
<html âš¡>
<head>
  <meta charset="utf-8">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <title>A sample shopping cart</title>
  <link rel="canonical" href="<%host%>/shopping_cart/">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
   <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <style amp-custom>
  </style>
</head>
<body>
  <!-- 

Introduction ...

## Dynamic Content

AMPs can be served from [AMP Caches](https://developers.google.com/amp/cache/overview) on a different origin, for example, when they're served in Google Search results. This makes it necessary to consider the AMP Cache's caching strategy when implementing AMPs:

> The (AMP) cache follows a "stale-while-revalidate" model. It uses the origin's caching headers, such as `Max-Age`, as hints in deciding whether a particular document or resource is stale. When a user makes a request for something that is stale, that request causes a new copy to be fetched, so that the next user gets fresh content.
[[source](https://developers.google.com/amp/cache/overview)]

If it's critical that users never see stale data **or** that data is never older than 15s then additional steps are required. Product pricing or availability are typical examples for when this is the case. To ensure that users always see the latest content, you can use the [amp-list](/components/amp-list) component which will fetch and render content directly from your server. 

Here is a sample how to render product name and price using amp-list:
  -->
  <amp-list height="24" layout="fixed-height" src="<%host%>/json/product.json" class="m1">
    <template type="amp-mustache" id="amp-template-id">
      {{name}}: ${{price}}
    </template>
  </amp-list>

<!--
<div class="ampstart-card info">
**Best Practice:** use multiple amp-list instances with a single shared json endpoint to benefit from the amp runtimes request caching and avoid multiple requests to JSON endpoints.
</div>

## Personalization & Login

You can provide personalized content `amp-list` also support personalizing content either via cookies (using the attribute `credentials="include"`) or via AMP's [client id](https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md#client-id):
-->

  <amp-list credentials="include" height="24" layout="fixed-height" src="<%host%>/json/product.json?clientId=CLIENT_ID(myCookieId)" class="m1">
    <template type="amp-mustache" id="amp-template-id">
      Your personal offer: ${{price}}
    </template>
  </amp-list>

<!--
<div class="ampstart-card info">
**Best Practice:** make sure to configure the [AMP CORS headers](https://github.com/ampproject/amphtml/blob/master/spec/amp-cors-requests.md) when using `amp-list` for personalization. 
</div>

If you rely on logged-in users, you can use the [amp-access](/components/amp-access/) component to log users into your website directly from an AMP page. Check out [this sample](/samples_templates/comment_section/) for how to implement a login flow in AMP. 

<div class="ampstart-card info">
**Good to know:** `amp-access` works on your origin and on AMP Caches.
</div>

## Category Pages

* **Product search:** use [amp-form](/components/amp-form/) to implement a search form. You can serve search results either on a different page (which must not be AMP) or, even better, render search results directly inside the current page.
* **Product filtering and sorting:** client-side sorting and filtering is going to be supported soon [amp-sort](https://github.com/ampproject/amphtml/issues/8691) and [amp-filter](https://github.com/ampproject/amphtml/issues/9113). Until then you can always fallback to handling this server-side. 

## Product pages

* Carousels (with thumbnails): amp-carousel + amp-bind
* Product configuration: amp-bind
* Like / Favorite / Save (no sample yet)
* Add to Cart: amp-form (optional redirect)
* Lightbox
* Tabs

## Checkout flow & Payments

Three possibilities:

* For users in Chrome you can user the payments requests API
* Implement checkout flow directy in your AMP.
* Re-direct user to the checkout flow on your website. Important: make the transition as seamless as possible, in particular, don't let users enter the same information twice.

<div class="ampstart-card info">
**Best Practice:** speed-up the transition from your AMPs to your normal website using [amp-install-serviceworker](/components/amp-install-serviceworker/) to pre-cache parts of your normal website.
</div>

## Analytics

Explain cache origin problem.

<div class="ampstart-card info">
**Best Practice:** treat your AMPs as a different platform similar to like you would treat an email campaign. Make sure to properly attribute links from your AMPs back to your website.
</div>

## More

Docs ...
Ask questions here...
 
  -->

</body>
</html>
