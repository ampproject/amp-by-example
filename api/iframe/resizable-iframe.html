<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <link rel="stylesheet" href="https://ampbyexample.com/css/ampstart.css">
    <style>
body {
  margin: 0;
  padding: 0;
}
#box {
  width: 198px;
  height: 198px;
  border: 2px solid #b60845;
  padding: 1rem;
  background: #ccc;
}
p {
  margin-top: 1rem;
}
    </style>
  </head>
  <body>
    <div id="box">
      <button id="action" class="ampstart-btn">Resize to 300x300</button>
      <p id="message">Size: <span id="size">200x200</span></p>
    </div>
  <script>
(function (d, w) {
  var BORDER_WIDTH = 2;
  postSize(200, 200);

  d.getElementById('action').onclick = function(event) {
    postSize(300, 300);
  }

  function postSize(width, height) {
    console.log('post new embed-size: ' + width + 'x' + height);
    d.getElementById('size').innerHTML = width + 'x' + height;
    var box = d.getElementById('box');
    box.style.width = width - BORDER_WIDTH + 'px';
    box.style.height = height - BORDER_WIDTH + 'px';

    w.parent.postMessage({
      sentinel: 'amp',
      type: 'embed-size',
      height: height,
      width: width
    }, '*');

  }
})(document, window);
  </script>
  </body>
</html>
